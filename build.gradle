/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

plugins {
	id 'java'
	id 'application'
	id 'eclipse'
	id 'ca.coglinc2.javacc' version '3.0.0'
}

dependencies {
    //implementation 'com.google.guava:guava:26.0-jre'
	compile group: 'org.ow2.asm', name: 'asm', version: '7.2'
	compile files("classfolder")
	
    testImplementation 'junit:junit:4.12'
}

repositories {
	jcenter()
	mavenCentral()
}

test {
	testLogging {
        outputs.upToDateWhen {false}
        afterSuite { desc, result ->
      		if (!desc.parent) { // will match the outermost suite
        		println "\nResults: ${result.resultType} (${result.testCount} tests, \u001B[32m${result.successfulTestCount} successes\u001B[0m, \u001B[31m${result.failedTestCount} failures\u001B[0m, ${result.skippedTestCount} skipped)"
      		}
    	}
    }
}

mainClassName = 'Main'

sourceSets {
	main {
        java {
            srcDirs = ['./src', compileJavacc.outputDirectory]
        }
    }
    test {
		java {
			srcDirs './test'
		}
	}
}

eclipseClasspath.dependsOn("compileJavacc")

compileJavacc {
     inputDirectory = file('src/dev/jorel/fortelangprime/parser')
     outputDirectory = file('src/dev/jorel/fortelangprime/parser')
}
